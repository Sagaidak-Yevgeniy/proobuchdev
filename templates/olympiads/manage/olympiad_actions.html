{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans 'Управление олимпиадой' %} - {{ olympiad.title }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="mb-6">
        {% include 'components/olympiad_breadcrumbs.html' with olympiad=olympiad current='actions' %}
    </div>
    
    <div class="flex flex-col md:flex-row">
        <!-- Левая панель навигации -->
        <div class="w-full md:w-1/4 mb-6 md:mb-0 md:pr-6">
            <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden sticky top-4">
                <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-500 to-blue-600 text-white">
                    <div class="flex items-center">
                        <i class="fas fa-tasks-alt text-lg mr-2"></i>
                        <h2 class="text-lg font-medium">{% trans 'Инструменты управления' %}</h2>
                    </div>
                </div>
                <div class="p-4">
                    <nav class="space-y-2">
                        <a href="#" data-section="overview" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-home w-5 h-5 mr-2"></i>
                            <span>{% trans 'Обзор' %}</span>
                        </a>
                        <a href="#" data-section="edit" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-cog w-5 h-5 mr-2"></i>
                            <span>{% trans 'Настройки' %}</span>
                        </a>
                        <a href="#" data-section="tasks" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-list-check w-5 h-5 mr-2"></i>
                            <span>{% trans 'Задания' %}</span>
                        </a>
                        <a href="#" data-section="participants" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-users w-5 h-5 mr-2"></i>
                            <span>{% trans 'Участники' %}</span>
                        </a>
                        <a href="#" data-section="invitations" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-envelope-open-text w-5 h-5 mr-2"></i>
                            <span>{% trans 'Приглашения' %}</span>
                        </a>
                        <a href="#" data-section="statistics" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-chart-line w-5 h-5 mr-2"></i>
                            <span>{% trans 'Статистика' %}</span>
                        </a>
                        <a href="#" data-section="reports" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-file-export w-5 h-5 mr-2"></i>
                            <span>{% trans 'Отчеты' %}</span>
                        </a>
                        <a href="#" data-section="status" class="olympiad-nav-link flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <i class="fas fa-power-off w-5 h-5 mr-2"></i>
                            <span>{% trans 'Статус' %}</span>
                        </a>
                    </nav>
                </div>
            </div>
        </div>
        
        <!-- Правая панель с содержимым -->
        <div class="w-full md:w-3/4">
            <!-- Содержимое каждой секции -->
            
            <!-- Секция: Обзор (по умолчанию) -->
            <div id="section-overview" class="content-section">
                <h1 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">{{ olympiad.title }}</h1>
                
                <div class="p-4 mb-6 rounded-lg border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-900/30 dark:border-blue-600">
                    <p class="text-gray-700 dark:text-gray-300">
                        {% if olympiad.status == 'draft' %}
                            {% trans 'Статус олимпиады: ' %}<span class="font-medium text-yellow-600 dark:text-yellow-400">{% trans 'Черновик' %}</span>
                        {% elif olympiad.status == 'published' %}
                            {% trans 'Статус олимпиады: ' %}<span class="font-medium text-blue-600 dark:text-blue-400">{% trans 'Опубликована' %}</span>
                        {% elif olympiad.status == 'active' %}
                            {% trans 'Статус олимпиады: ' %}<span class="font-medium text-green-600 dark:text-green-400">{% trans 'Активна' %}</span>
                        {% elif olympiad.status == 'completed' %}
                            {% trans 'Статус олимпиады: ' %}<span class="font-medium text-purple-600 dark:text-purple-400">{% trans 'Завершена' %}</span>
                        {% elif olympiad.status == 'archived' %}
                            {% trans 'Статус олимпиады: ' %}<span class="font-medium text-gray-600 dark:text-gray-400">{% trans 'Архивирована' %}</span>
                        {% endif %}
                    </p>
                    <div class="mt-2 flex flex-wrap">
                        <span class="inline-flex items-center mr-4 mb-2">
                            <i class="far fa-calendar mr-1 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-700 dark:text-gray-300">{% trans 'Начало:' %} {{ olympiad.start_datetime|date:"d.m.Y H:i" }}</span>
                        </span>
                        <span class="inline-flex items-center mr-4 mb-2">
                            <i class="far fa-calendar-check mr-1 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-700 dark:text-gray-300">{% trans 'Окончание:' %} {{ olympiad.end_datetime|date:"d.m.Y H:i" }}</span>
                        </span>
                        <span class="inline-flex items-center mb-2">
                            <i class="fas fa-tasks mr-1 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-700 dark:text-gray-300">{% trans 'Заданий:' %} {{ olympiad.tasks.count }}</span>
                        </span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <!-- Карточка настроек -->
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden action-card relative">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-500 to-blue-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-cog text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Настройки олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">{% trans 'Управление основными параметрами олимпиады, включая название, описание, даты проведения и правила.' %}</p>
                        <a href="{% url 'olympiads:olympiad_edit' olympiad_id=olympiad.id %}" class="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 action-btn">
                            <i class="fas fa-cog mr-2"></i>
                            {% trans 'Изменить настройки' %}
                        </a>
                    </div>
                </div>
                
                <!-- Карточка управления заданиями -->
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden action-card relative">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-500 to-purple-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-tasks text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Задания олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">{% trans 'Добавление, редактирование и управление заданиями олимпиады. Настройка тестовых случаев для проверки решений.' %}</p>
                        <a href="{% url 'olympiads:olympiad_tasks_manage' olympiad_id=olympiad.id %}" class="inline-flex items-center px-5 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800 action-btn">
                            <i class="fas fa-list-alt mr-2"></i>
                            {% trans 'Управлять заданиями' %}
                        </a>
                    </div>
                </div>
                
                <!-- Карточка активации/деактивации -->
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden action-card relative">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-500 to-green-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-power-off text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Статус олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                        {% if olympiad.status == 'active' %}
                            {% trans 'Олимпиада активна и доступна участникам. Вы можете деактивировать её.' %}
                        {% else %}
                            {% trans 'Олимпиада не активна. Активируйте её, чтобы сделать доступной для участников.' %}
                        {% endif %}
                        </p>
                        <button type="button" onclick="alert('{% trans 'Функция переключения статуса олимпиады в разработке' %}')" class="inline-flex items-center px-5 py-2.5 
                            {% if olympiad.status == 'active' %}
                                bg-amber-600 text-white rounded-lg hover:bg-amber-700 focus:ring-4 focus:ring-amber-300 dark:focus:ring-amber-800
                            {% else %}
                                bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800
                            {% endif %} action-btn">
                                <i class="fas {% if olympiad.status == 'active' %}fa-power-off{% else %}fa-play{% endif %} mr-2"></i>
                                {% if olympiad.status == 'active' %}
                                    {% trans 'Деактивировать' %}
                                {% else %}
                                    {% trans 'Активировать' %}
                                {% endif %}
                        </button>
                    </div>
                </div>
                
                <!-- Карточка участников -->
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden action-card relative">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-users text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Участники и приглашения' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">{% trans 'Управление участниками олимпиады, просмотр статистики и создание пригласительных кодов.' %}</p>
                        <div class="flex flex-wrap gap-3">
                            <a href="{% url 'olympiads:olympiad_participants' olympiad_id=olympiad.id %}" class="inline-flex items-center px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800 action-btn">
                                <i class="fas fa-user-friends mr-2"></i>
                                {% trans 'Участники' %}
                            </a>
                            <a href="{% url 'olympiads:olympiad_invitations' olympiad_id=olympiad.id %}" class="inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800 action-btn">
                                <i class="fas fa-envelope-open-text mr-2"></i>
                                {% trans 'Приглашения' %}
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Карточка статистики -->
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden action-card relative">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-chart-pie text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Статистика и отчеты' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">{% trans 'Просмотр подробной статистики по олимпиаде, экспорт отчетов о результатах и активности участников.' %}</p>
                        <div class="flex flex-wrap gap-3">
                            <button type="button" onclick="alert('{% trans 'Функция статистики олимпиады в разработке' %}')" class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-300 dark:focus:ring-indigo-800 action-btn">
                                <i class="fas fa-chart-line mr-2"></i>
                                {% trans 'Статистика' %}
                            </button>
                            <button type="button" onclick="alert('{% trans 'Функция отчетов олимпиады в разработке' %}')" class="inline-flex items-center px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 focus:ring-4 focus:ring-violet-300 dark:focus:ring-violet-800 action-btn">
                                <i class="fas fa-file-export mr-2"></i>
                                {% trans 'Отчеты' %}
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Карточка завершения/архивации -->
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden action-card relative">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-500 to-gray-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-archive text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Завершение олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">{% trans 'Завершение олимпиады и перевод её в архив. Результаты останутся доступны для просмотра.' %}</p>
                        <div class="grid grid-cols-2 gap-3">
                            <button type="button" onclick="alert('{% trans 'Функция завершения олимпиады в разработке' %}')" class="inline-flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-800 action-btn">
                                <i class="fas fa-flag-checkered mr-2"></i>
                                {% trans 'Завершить' %}
                            </button>
                            <button type="button" onclick="alert('{% trans 'Функция архивации олимпиады в разработке' %}')" class="inline-flex items-center justify-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-800 action-btn">
                                <i class="fas fa-archive mr-2"></i>
                                {% trans 'Архивировать' %}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
            <!-- Секция: Настройки -->
            <div id="section-edit" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-500 to-blue-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-cog text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Настройки олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            {% trans 'На странице настроек вы можете изменить:' %}
                        </p>
                        <ul class="list-disc list-inside mb-6 text-gray-700 dark:text-gray-300 space-y-2">
                            <li>{% trans 'Основную информацию (название, описание)' %}</li>
                            <li>{% trans 'Даты начала и окончания олимпиады' %}</li>
                            <li>{% trans 'Правила проведения и систему оценки' %}</li>
                            <li>{% trans 'Настройки видимости и доступа' %}</li>
                            <li>{% trans 'Изображение и дополнительные материалы' %}</li>
                        </ul>
                        <a href="{% url 'olympiads:olympiad_edit' olympiad_id=olympiad.id %}" class="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 action-btn">
                            <i class="fas fa-cog mr-2"></i>
                            {% trans 'Перейти к настройкам' %}
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Секция: Задания -->
            <div id="section-tasks" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-500 to-purple-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-tasks text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Управление заданиями' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            {% trans 'На странице управления заданиями вы можете:' %}
                        </p>
                        <ul class="list-disc list-inside mb-6 text-gray-700 dark:text-gray-300 space-y-2">
                            <li>{% trans 'Добавлять новые задания в олимпиаду' %}</li>
                            <li>{% trans 'Редактировать существующие задания' %}</li>
                            <li>{% trans 'Настраивать тестовые случаи для проверки решений' %}</li>
                            <li>{% trans 'Менять порядок заданий' %}</li>
                            <li>{% trans 'Устанавливать баллы за каждое задание' %}</li>
                        </ul>
                        <a href="{% url 'olympiads:olympiad_tasks_manage' olympiad_id=olympiad.id %}" class="inline-flex items-center px-5 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800 action-btn">
                            <i class="fas fa-list-alt mr-2"></i>
                            {% trans 'Перейти к управлению заданиями' %}
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Секция: Участники -->
            <div id="section-participants" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-users text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Участники олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            {% trans 'На странице управления участниками вы можете:' %}
                        </p>
                        <ul class="list-disc list-inside mb-6 text-gray-700 dark:text-gray-300 space-y-2">
                            <li>{% trans 'Просмотреть список всех зарегистрированных участников' %}</li>
                            <li>{% trans 'Управлять доступом участников к олимпиаде' %}</li>
                            <li>{% trans 'Просматривать прогресс участников и их результаты' %}</li>
                            <li>{% trans 'Добавлять участников вручную' %}</li>
                            <li>{% trans 'Отправлять уведомления участникам' %}</li>
                        </ul>
                        <a href="{% url 'olympiads:olympiad_participants' olympiad_id=olympiad.id %}" class="inline-flex items-center px-5 py-2.5 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800 action-btn">
                            <i class="fas fa-user-friends mr-2"></i>
                            {% trans 'Перейти к списку участников' %}
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Секция: Приглашения -->
            <div id="section-invitations" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-500 to-teal-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-envelope-open-text text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Приглашения' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            {% trans 'На странице управления приглашениями вы можете:' %}
                        </p>
                        <ul class="list-disc list-inside mb-6 text-gray-700 dark:text-gray-300 space-y-2">
                            <li>{% trans 'Создавать пригласительные коды для участников' %}</li>
                            <li>{% trans 'Настраивать срок действия приглашений' %}</li>
                            <li>{% trans 'Отправлять приглашения по электронной почте' %}</li>
                            <li>{% trans 'Отслеживать использование приглашений' %}</li>
                            <li>{% trans 'Отзывать неиспользованные приглашения' %}</li>
                        </ul>
                        <a href="{% url 'olympiads:olympiad_invitations' olympiad_id=olympiad.id %}" class="inline-flex items-center px-5 py-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800 action-btn">
                            <i class="fas fa-envelope-open-text mr-2"></i>
                            {% trans 'Перейти к приглашениям' %}
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Секция: Статистика -->
            <div id="section-statistics" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-chart-line text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Статистика олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="p-4 text-center bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <p class="mb-2">{% trans 'Статистика олимпиады загружается здесь' %}</p>
                            <div class="animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto"></div>
                            <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">{% trans 'Функция в разработке' %}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Секция: Отчеты -->
            <div id="section-reports" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-violet-500 to-violet-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-file-export text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Отчеты' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="p-4 text-center bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <p class="mb-2">{% trans 'Отчеты олимпиады загружаются здесь' %}</p>
                            <div class="animate-spin w-8 h-8 border-4 border-violet-500 border-t-transparent rounded-full mx-auto"></div>
                            <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">{% trans 'Функция в разработке' %}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Секция: Статус -->
            <div id="section-status" class="content-section hidden">
                <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-500 to-green-600 text-white">
                        <div class="flex items-center">
                            <i class="fas fa-power-off text-lg mr-2"></i>
                            <h2 class="text-lg font-medium">{% trans 'Управление статусом олимпиады' %}</h2>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="space-y-6">
                            <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">{% trans 'Текущий статус' %}</h3>
                                <div class="flex items-center">
                                    <span class="px-3 py-1.5 inline-flex items-center justify-center rounded-full text-white font-medium 
                                        {% if olympiad.status == 'draft' %}bg-yellow-500
                                        {% elif olympiad.status == 'published' %}bg-blue-500
                                        {% elif olympiad.status == 'active' %}bg-green-500
                                        {% elif olympiad.status == 'completed' %}bg-purple-500
                                        {% elif olympiad.status == 'archived' %}bg-gray-500
                                        {% endif %}">
                                        <i class="fas fa-circle mr-2 text-xs"></i>
                                        {{ olympiad.get_status_display }}
                                    </span>
                                </div>
                                
                                <p class="mt-3 text-gray-700 dark:text-gray-300">
                                    {% if olympiad.status == 'draft' %}
                                        {% trans 'Олимпиада находится в режиме черновика. Она недоступна для участников и видима только организаторам. Вы можете редактировать все параметры и задания.' %}
                                    {% elif olympiad.status == 'published' %}
                                        {% trans 'Олимпиада опубликована, но еще не активирована. Пользователи могут видеть информацию о ней и регистрироваться, но не могут участвовать.' %}
                                    {% elif olympiad.status == 'active' %}
                                        {% trans 'Олимпиада активна и доступна для участия. Зарегистрированные пользователи могут решать задания и получать баллы.' %}
                                    {% elif olympiad.status == 'completed' %}
                                        {% trans 'Олимпиада завершена. Участие больше невозможно, но результаты доступны для просмотра.' %}
                                    {% elif olympiad.status == 'archived' %}
                                        {% trans 'Олимпиада архивирована. Она сохранена в системе, но не отображается в общих списках.' %}
                                    {% endif %}
                                </p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {% if olympiad.status == 'draft' %}
                                    <button type="button" onclick="alert('{% trans 'Функция публикации олимпиады в разработке' %}')" class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition-all action-btn">
                                        <i class="fas fa-check-circle mr-2"></i> {% trans 'Опубликовать' %}
                                    </button>
                                    <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            {% trans 'Публикация сделает олимпиаду видимой для всех пользователей, но они не смогут участвовать, пока вы не активируете её.' %}
                                        </p>
                                    </div>
                                {% elif olympiad.status == 'published' %}
                                    <button type="button" onclick="alert('{% trans 'Функция активации олимпиады в разработке' %}')" class="w-full flex items-center justify-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow transition-all action-btn">
                                        <i class="fas fa-play-circle mr-2"></i> {% trans 'Активировать' %}
                                    </button>
                                    <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            {% trans 'Активация позволит участникам начать решать задания и получать баллы. Убедитесь, что все настройки и задания готовы.' %}
                                        </p>
                                    </div>
                                {% elif olympiad.status == 'active' %}
                                    <button type="button" onclick="alert('{% trans 'Функция деактивации олимпиады в разработке' %}')" class="w-full flex items-center justify-center px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg shadow transition-all action-btn">
                                        <i class="fas fa-pause-circle mr-2"></i> {% trans 'Деактивировать' %}
                                    </button>
                                    <button type="button" onclick="alert('{% trans 'Функция завершения олимпиады в разработке' %}')" class="w-full flex items-center justify-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg shadow transition-all action-btn">
                                        <i class="fas fa-flag-checkered mr-2"></i> {% trans 'Завершить' %}
                                    </button>
                                    <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 md:col-span-2">
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            {% trans 'Деактивация временно приостановит возможность участия в олимпиаде. Завершение закроет олимпиаду навсегда - это действие нельзя отменить.' %}
                                        </p>
                                    </div>
                                {% elif olympiad.status == 'completed' %}
                                    <button type="button" onclick="alert('{% trans 'Функция архивации олимпиады в разработке' %}')" class="w-full flex items-center justify-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg shadow transition-all action-btn">
                                        <i class="fas fa-archive mr-2"></i> {% trans 'Архивировать' %}
                                    </button>
                                    <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            {% trans 'Архивирование скроет олимпиаду из общих списков, но она останется доступна через прямую ссылку для просмотра результатов.' %}
                                        </p>
                                    </div>
                                {% elif olympiad.status == 'archived' %}
                                    <button type="button" onclick="alert('{% trans 'Функция восстановления олимпиады в разработке' %}')" class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition-all action-btn">
                                        <i class="fas fa-undo mr-2"></i> {% trans 'Восстановить' %}
                                    </button>
                                    <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            {% trans 'Восстановление вернет олимпиаду из архива в статус "Завершена" и сделает её снова видимой в списках завершенных олимпиад.' %}
                                        </p>
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="border-t border-gray-200 dark:border-gray-700 pt-6">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">{% trans 'Расписание олимпиады' %}</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">{% trans 'Дата начала:' %}</p>
                                        <p class="font-medium text-gray-800 dark:text-gray-200">
                                            {{ olympiad.start_datetime|date:"d.m.Y H:i" }}
                                        </p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">{% trans 'Дата окончания:' %}</p>
                                        <p class="font-medium text-gray-800 dark:text-gray-200">
                                            {{ olympiad.end_datetime|date:"d.m.Y H:i" }}
                                        </p>
                                    </div>
                                    <div class="md:col-span-2">
                                        <a href="{% url 'olympiads:olympiad_edit' olympiad_id=olympiad.id %}" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 action-btn">
                                            <i class="fas fa-calendar-alt mr-2"></i>
                                            {% trans 'Изменить расписание' %}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Получаем все навигационные ссылки
        const navLinks = document.querySelectorAll('.olympiad-nav-link');
        // Получаем все секции содержимого
        const contentSections = document.querySelectorAll('.content-section');
        
        // Функция для активации секции
        function activateSection(sectionId) {
            // Скрываем все секции
            contentSections.forEach(section => {
                section.classList.add('hidden');
            });
            
            // Удаляем активный класс у всех ссылок
            navLinks.forEach(link => {
                link.classList.remove('bg-blue-100', 'dark:bg-gray-700', 'text-blue-700', 'dark:text-blue-400', 'active-nav-link');
            });
            
            // Показываем выбранную секцию
            const targetSection = document.getElementById('section-' + sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Активируем соответствующую ссылку
            const activeLink = document.querySelector('.olympiad-nav-link[data-section="' + sectionId + '"]');
            if (activeLink) {
                activeLink.classList.add('bg-blue-100', 'dark:bg-gray-700', 'text-blue-700', 'dark:text-blue-400', 'active-nav-link');
            }
            
            // Сохраняем активную секцию в sessionStorage (не в localStorage, чтобы избежать проблем между вкладками)
            sessionStorage.setItem('olympiadActiveSection_' + {{ olympiad.id }}, sectionId);
        }
        
        // Добавляем обработчики событий для всех навигационных ссылок
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');
                activateSection(sectionId);
            });
        });
        
        // При загрузке страницы проверяем, есть ли сохраненная активная секция в sessionStorage
        const savedSection = sessionStorage.getItem('olympiadActiveSection_' + {{ olympiad.id }});
        
        if (savedSection && document.getElementById('section-' + savedSection)) {
            // Если есть сохраненная секция, активируем её
            activateSection(savedSection);
        } else {
            // Иначе активируем секцию "Обзор" по умолчанию
            activateSection('overview');
        }
    });
</script>
{% endblock %}